<!DOCTYPE html>
<html>
<head>
    <title>饺子消消乐</title>
    <style>
        body { font-family: Arial; display: flex; flex-direction: column; align-items: center; background: #f0f0f0; margin: 0; padding: 20px; }
        .game-container { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .grid { display: grid; grid-template-columns: repeat(6, 60px); gap: 8px; }
        .cell { width: 60px; height: 60px; border-radius: 8px; cursor: pointer; background-size: cover; border: 2px solid transparent; }
        .cell.selected { border-color: #ff6b6b; }
        .score-board { margin-bottom: 15px; font-size: 20px; font-weight: bold; }
        button { padding: 8px 15px; background: #ff9e7d; color: white; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="score-board">分数: <span id="score">0</span></div>
    <div class="game-container"><div id="grid" class="grid"></div></div>
    <button onclick="initGame()">重新开始</button>

    <script>
        const IMAGES = [
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/d38c0a57b2e542dbb492271cfa6fed7e.jpg',
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/f35dbc7296ea48c7b13877715ca800b8.jpg',
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/3e857a5141c3480da394dd5670e76efc.jpg',
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/28010b6466e84680ac93da85c1486e07.png',
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/86c35c673afb469387d35708a1dd57f5.jpg',
            'https://p11-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/0427ad4edaa4418e88f18dc1adfe1398.jpg'
        ];
        
        let grid = [], score = 0, selected = null;
        
        function initGame() {
            grid = []; score = 0; selected = null;
            document.getElementById('score').textContent = score;
            const gridEl = document.getElementById('grid');
            gridEl.innerHTML = '';
            
            for (let i = 0; i < 6; i++) {
                grid[i] = [];
                for (let j = 0; j < 6; j++) {
                    const type = Math.floor(Math.random() * IMAGES.length);
                    grid[i][j] = type;
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.style.backgroundImage = `url(${IMAGES[type]})`;
                    cell.onclick = () => handleClick(i, j, cell);
                    gridEl.appendChild(cell);
                }
            }
        }
        
        function handleClick(i, j, cell) {
            if (!selected) {
                selected = {i, j, cell};
                cell.classList.add('selected');
                return;
            }
            
            if (selected.i === i && selected.j === j) {
                selected.cell.classList.remove('selected');
                selected = null;
                return;
            }
            
            const isAdjacent = (Math.abs(selected.i - i) === 1 && selected.j === j) || 
                             (Math.abs(selected.j - j) === 1 && selected.i === i);
            
            if (isAdjacent && grid[selected.i][selected.j] === grid[i][j]) {
                selected.cell.classList.remove('selected');
                removeCells([selected, {i, j, cell}]);
                selected = null;
            } else {
                selected.cell.classList.remove('selected');
                selected = {i, j, cell};
                cell.classList.add('selected');
            }
        }
        
        function removeCells(cells) {
            score += 20;
            document.getElementById('score').textContent = score;
            cells.forEach(({i, j, cell}) => {
                grid[i][j] = null;
                cell.style.backgroundImage = 'none';
                cell.style.backgroundColor = '#f0f0f0';
            });
            setTimeout(() => {
                dropCells();
                fillCells();
            }, 300);
        }
        
        function dropCells() {
            for (let j = 0; j < 6; j++) {
                let empty = 0;
                for (let i = 5; i >= 0; i--) {
                    if (grid[i][j] === null) empty++;
                    else if (empty > 0) {
                        grid[i + empty][j] = grid[i][j];
                        grid[i][j] = null;
                    }
                }
            }
        }
        
        function fillCells() {
            const cells = document.querySelectorAll('.cell');
            let index = 0;
            for (let j = 0; j < 6; j++) {
                for (let i = 0; i < 6; i++) {
                    if (grid[i][j] === null) {
                        const type = Math.floor(Math.random() * IMAGES.length);
                        grid[i][j] = type;
                        cells[index].style.backgroundImage = `url(${IMAGES[type]})`;
                        cells[index].style.backgroundColor = '';
                    }
                    index++;
                }
            }
        }
        
        initGame();
    </script>
</body>
</html>
